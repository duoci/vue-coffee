(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-114bb96a"],{"04d2":function(t,e,n){"use strict";n("f818")},"13ad":function(t,e,n){"use strict";n("aa8c")},"159b":function(t,e,n){var i=n("da84"),a=n("fdbc"),r=n("785a"),c=n("17c2"),s=n("9112"),o=function(t){if(t&&t.forEach!==c)try{s(t,"forEach",c)}catch(e){t.forEach=c}};for(var u in a)a[u]&&o(i[u]&&i[u].prototype);o(r)},"17c2":function(t,e,n){"use strict";var i=n("b727").forEach,a=n("a640"),r=a("forEach");t.exports=r?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"1a0d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navi"},[n("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","right-text":t.rightText,fixed:t.fixed,"left-arrow":""},on:{"click-left":t.back,"click-right":t.clickRight}})],1)},a=[],r={name:"Navi",data:function(){return{}},props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},methods:{back:function(){this.$router.go(-1)},clickRight:function(){this.$emit("click-right")}}},c=r,s=(n("04d2"),n("2877")),o=Object(s["a"])(c,i,a,!1,null,"17aaf7fc",null);e["a"]=o.exports},"408a":function(t,e,n){var i=n("e330");t.exports=i(1..valueOf)},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var i=n("e330"),a=n("1d80"),r=n("577e"),c=n("5899"),s=i("".replace),o="["+c+"]",u=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t){return function(e){var n=r(a(e));return 1&t&&(n=s(n,u,"")),2&t&&(n=s(n,l,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},a15b:function(t,e,n){"use strict";var i=n("23e7"),a=n("e330"),r=n("44ad"),c=n("fc6a"),s=n("a640"),o=a([].join),u=r!=Object,l=s("join",",");i({target:"Array",proto:!0,forced:u||!l},{join:function(t){return o(c(this),void 0===t?",":t)}})},a640:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){return 1},1)}))}},a9e3:function(t,e,n){"use strict";var i=n("83ab"),a=n("da84"),r=n("e330"),c=n("94ca"),s=n("6eeb"),o=n("1a2d"),u=n("7156"),l=n("3a9b"),d=n("d9b5"),f=n("c04e"),p=n("d039"),v=n("241c").f,h=n("06cf").f,g=n("9bf2").f,b=n("408a"),m=n("58a8").trim,k="Number",x=a[k],C=x.prototype,_=a.TypeError,E=r("".slice),w=r("".charCodeAt),N=function(t){var e=f(t,"number");return"bigint"==typeof e?e:I(e)},I=function(t){var e,n,i,a,r,c,s,o,u=f(t,"number");if(d(u))throw _("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=m(u),e=w(u,0),43===e||45===e){if(n=w(u,2),88===n||120===n)return NaN}else if(48===e){switch(w(u,1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+u}for(r=E(u,2),c=r.length,s=0;s<c;s++)if(o=w(r,s),o<48||o>a)return NaN;return parseInt(r,i)}return+u};if(c(k,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var R,y=function(t){var e=arguments.length<1?0:x(N(t)),n=this;return l(C,n)&&p((function(){b(n)}))?u(Object(e),n,y):e},D=i?v(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),S=0;D.length>S;S++)o(x,R=D[S])&&!o(y,R)&&g(y,R,h(x,R));y.prototype=C,C.constructor=y,s(a,k,y)}},aa8c:function(t,e,n){},c84b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail"},[n("Navi",{attrs:{title:"商品详情",fixed:!0}}),n("div",[n("div",{staticClass:"detail-img"},[n("img",{staticClass:"auto-img",attrs:{src:t.productDetail.large_img,alt:""}})]),n("div",{staticClass:"detail-info"},[n("div",{staticClass:"detail-pro"},[n("div",[n("div",{staticClass:"detail-name one-text"},[t._v(t._s(t.productDetail.name))]),n("div",{staticClass:"detail-enname one-text"},[t._v(t._s(t.productDetail.enname))])]),n("div",{staticClass:"detail-price"},[t._v("¥"+t._s(t.productDetail.price))])]),n("div",{staticClass:"detail-rules"},t._l(t.productDetail.rulesData,(function(e,i){return n("div",{key:i,staticClass:"detail-rules-item"},[n("div",{staticClass:"rules-title"},[t._v(t._s(e.title))]),n("div",{staticClass:"rules"},t._l(e.subRule,(function(i,a){return n("div",{key:a,staticClass:"rules-item",class:{active:a===e.activeIndex},on:{click:function(n){return t.selectRule(e,a)}}},[t._v(" "+t._s(i.title)+" ")])})),0)])})),0),n("div",{staticClass:"select-count-box"},[n("div",{staticClass:"select-text"},[t._v("选择数量")]),n("div",{staticClass:"select-count"},[n("van-stepper",{attrs:{theme:"round","button-size":"22","disable-input":""},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1)]),n("div",{staticClass:"detail-desc"},[n("div",{staticClass:"detail-desc-title"},[t._v("商品描述")]),n("div",{staticClass:"detail-desc-content"},t._l(t.productDetail.desc,(function(e,i){return n("div",{key:i,staticClass:"desc-item"},[t._v(t._s(i+1)+"、"+t._s(e))])})),0)])])]),n("van-goods-action",[n("van-goods-action-icon",{attrs:{to:{name:"Shopbag"},icon:"bag",text:"购物袋",color:"#646566",badge:t.shopbagCount}}),n("van-goods-action-icon",{attrs:{icon:"like",text:t.isLike?"已收藏":"收藏",color:t.isLike?"#e4393c":"#646566"},on:{click:t.likeProduct}}),n("van-goods-action-button",{attrs:{color:"#0C34BA",text:"加入购物袋"},on:{click:t.addShopbag}})],1)],1)},a=[],r=n("3835"),c=n("1da1"),s=(n("96cf"),n("ac1f"),n("1276"),n("d3b7"),n("159b"),n("a15b"),n("a9e3"),n("1a0d")),o={name:"Detail",data:function(){return{count:1,pid:"",productDetail:{},isLike:!1,shopbagCount:""}},components:{Navi:s["a"]},created:function(){this.pid=this.$route.params.pid,console.log(this.pid),this.getProductDetailByPid(this.pid),this.findCurrentLike(),this.getShopbagCount()},methods:{getProductDetailByPid:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i,a,c,s,o,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("productDetail",{pid:t});case 2:i=n.sent,a=i.result,c=i.code,s=Object(r["a"])(a,1),o=s[0],600===c&&(o.desc=o.desc.split(/\n/),u=[],l=["tem","sugar","milk","cream"],l.forEach((function(t){if(""!==o[t]){var e={title:o["".concat(t,"_desc")],activeIndex:0,subRule:[]},n=o[t].split(/\//);n.forEach((function(t){e.subRule.push({title:t})})),u.push(e)}})),console.log("rulesData ==> ",u),o.rulesData=u,e.productDetail=o);case 6:case"end":return n.stop()}}),n)})))()},selectRule:function(t,e){t.activeIndex!==e?t.activeIndex=e:console.log("已经处于激活状态")},likeProduct:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.isLike?"/notlike":"/like",e.next=3,t.post(n,{pid:t.pid});case 3:i=e.sent,console.log(i),800===i.code?t.isLike=!0:900===i.code&&1===i.result&&(t.isLike=!1);case 6:case"end":return e.stop()}}),e)})))()},findCurrentLike:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get("findlike",{pid:t.pid});case 2:n=e.sent,1e3===n.code&&n.result.length>0&&(t.isLike=!0);case 4:case"end":return e.stop()}}),e)})))()},getShopbagCount:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get("shopcartCount",{pid:t.pid});case 2:n=e.sent,4e3===n.code&&(t.shopbagCount=n.result);case 4:case"end":return e.stop()}}),e)})))()},addShopbag:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.next=3,t.post("addShopcart",{pid:t.pid,count:t.count,rule:n.join("/")});case 3:i=e.sent,3e3===i.code?(t.$toast("加入购物袋成功"),t.shopbagCount=Number(t.shopbagCount)+t.count):t.$toast("加入购物袋失败");case 5:case"end":return e.stop()}}),e)})))()}}},u=o,l=(n("13ad"),n("2877")),d=Object(l["a"])(u,i,a,!1,null,"b32e063e",null);e["default"]=d.exports},f818:function(t,e,n){}}]);
//# sourceMappingURL=chunk-114bb96a.071754b1.js.map