(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e029452"],{"305b":function(s,e,t){"use strict";t.r(e);var o=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"Secure"},[t("Navi",{attrs:{title:"安全中心",fixed:!0}}),t("div",{staticClass:"SecureBox"},[t("Bg",[t("div",{staticClass:"Secure-list"},[t("div",{staticClass:"Secure-item"},[t("van-cell",{attrs:{"is-link":""},on:{click:s.pswPopup}},[s._v("修改密码")]),t("van-popup",{style:{height:"40%"},attrs:{position:"bottom",closeable:""},model:{value:s.pwsshow,callback:function(e){s.pwsshow=e},expression:"pwsshow"}},[t("div",{staticClass:"pwsBox"},[t("div",{staticClass:"pwsBox-text"},[s._v("修改密码")]),t("van-field",{attrs:{type:s.isOldGaiPasssword?"text":"password",name:"旧密码",label:"旧密码",placeholder:"请输入旧密码","right-icon":s.isOldGaiPasssword?"eye-o":"closed-eye",autocomplete:"off"},on:{"click-right-icon":s.OldGaiPasssword},model:{value:s.oldPassword,callback:function(e){s.oldPassword=e},expression:"oldPassword"}}),t("van-field",{attrs:{type:s.isOpenRegister?"text":"password",name:"新密码",label:"新密码",placeholder:"请输入新密码","right-icon":s.isOpenRegister?"eye-o":"closed-eye",autocomplete:"off"},on:{"click-right-icon":s.XiuGaiPasssword},model:{value:s.newPassword,callback:function(e){s.newPassword=e},expression:"newPassword"}}),t("div",{staticClass:"psw-btn"},[t("van-button",{attrs:{round:"",block:"",color:"#0C34BA"},on:{click:function(e){return s.xiugaipsw(s.oldPassword,s.newPassword)}}},[s._v("修改密码")])],1)],1)])],1),t("div",{staticClass:"Secure-item"},[t("van-cell",{attrs:{"is-link":""},on:{click:s.closeAccount}},[s._v("注销账号")])],1)]),t("div",{staticClass:"Secure-btn"},[t("van-button",{attrs:{round:"",block:"",color:"#0C34BA"},on:{click:function(e){return s.logout()}}},[s._v("退出登陆")])],1)])],1)],1)},n=[],a=t("1da1"),r=(t("96cf"),t("1a0d")),i=t("30c7"),c={name:"Secure",data:function(){return{pwsshow:!1,isOpenRegister:!1,isOldGaiPasssword:!1,newPassword:"",oldPassword:""}},components:{Navi:r["a"],Bg:i["a"]},methods:{logout:function(){var s=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.post("logout",{});case 2:t=e.sent,"F001"===t.code&&setTimeout((function(){s.$router.push({name:"Home"})}),1e3);case 4:case"end":return e.stop()}}),e)})))()},closeAccount:function(){var s=this;this.$dialog.confirm({title:"注销账号",message:"是否确认注销账号，一旦注销无法恢复"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.post("destroyAccount",{});case 2:t=e.sent,"G001"===t.code&&s.$router.push({name:"Login"});case 4:case"end":return e.stop()}}),e)})))).catch((function(s){console.log(s)}))},pswPopup:function(){this.pwsshow=!0},XiuGaiPasssword:function(){this.isOpenRegister=!this.isOpenRegister},OldGaiPasssword:function(){this.isOldGaiPasssword=!this.isOldGaiPasssword},xiugaipsw:function(s,e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(s!==e){o.next=3;break}return t.$toast("新旧密码不能相同"),o.abrupt("return");case 3:return o.next=5,t.post("updatePassword",{password:e,oldPassword:s});case 5:n=o.sent,console.log(n),"E001"===n.code&&(t.pwsshow=!1,t.oldPassword="",t.newPassword="",t.$router.push({name:"Login"}),t.$notify({type:"primary",message:"密码成功修改,请重新登陆",background:"#0C34BA",color:"#fff"})),"E003"===n.code&&(t.$toast(n.msg),t.pwsshow=!1,t.oldPassword="",t.newPassword="");case 9:case"end":return o.stop()}}),o)})))()}}},l=c,u=(t("514f"),t("2877")),d=Object(u["a"])(l,o,n,!1,null,"557af41c",null);e["default"]=d.exports},"514f":function(s,e,t){"use strict";t("b6e2")},b6e2:function(s,e,t){}}]);
//# sourceMappingURL=chunk-4e029452.93143b1e.js.map